---
id: 01KH2GN7YMT83B847JY61AW0X6
type: design
requires: 01KH2GJHTN3QMJEV4FDK5ANEZY
title: branch_list操作実装設計
created: 2026-02-10T00:54:10.132Z
updated: 2026-02-10T05:29:47.361Z
content: >-
  ## 実装ファイル


  `packages/mcp-git-repo-explorer/src/operations/branch.ts`


  ## 操作定義


  ```typescript

  export const branchListOperation: Operation = {
    id: "branch_list",
    category: "Reference",
    summary: "ブランチ一覧",
    argsSchema: z.object({
      repo_url: z.string().optional(),
      remote: z.boolean().default(true),
      pattern: z.string().optional(),
    }),
    async execute(args, ctx) {
      const format = "%(refname:short)|%(objectname:short)|%(committerdate:iso8601)|%(subject)";
      const cmd = ["branch", `--format=${format}`];
      if (args.remote) cmd.push("-a");
      
      const result = await execGit(cmd, ctx.repoPath);
      let branches = parseBranchOutput(result);
      
      if (args.pattern) {
        const regex = new RegExp(args.pattern);
        branches = branches.filter(b => regex.test(b.name));
      }
      
      return {
        content: [{ type: "text", text: JSON.stringify(branches, null, 2) }]
      };
    }
  };

  ```
filePath: docs/chain/design/01KH2GN7YMT83B847JY61AW0X6.md
---

## 実装ファイル

`packages/mcp-git-repo-explorer/src/operations/branch.ts`

## 操作定義

```typescript
export const branchListOperation: Operation = {
  id: "branch_list",
  category: "Reference",
  summary: "ブランチ一覧",
  argsSchema: z.object({
    repo_url: z.string().optional(),
    remote: z.boolean().default(true),
    pattern: z.string().optional(),
  }),
  async execute(args, ctx) {
    const format = "%(refname:short)|%(objectname:short)|%(committerdate:iso8601)|%(subject)";
    const cmd = ["branch", `--format=${format}`];
    if (args.remote) cmd.push("-a");
    
    const result = await execGit(cmd, ctx.repoPath);
    let branches = parseBranchOutput(result);
    
    if (args.pattern) {
      const regex = new RegExp(args.pattern);
      branches = branches.filter(b => regex.test(b.name));
    }
    
    return {
      content: [{ type: "text", text: JSON.stringify(branches, null, 2) }]
    };
  }
};
```
